
#include <Wire.h> 
#include <LiquidCrystal_I2C.h>
int in1 =4;
int in2 = 5;



void setup() {
  pinMode(in1,OUTPUT);
  pinMode(in2,OUTPUT);
  pinMode(in3,OUTPUT);
  pinMode(in4,OUTPUT);
  pinMode(in5,OUTPUT);
  pinMode(in6,OUTPUT);
  pinMode(in7,OUTPUT);
  pinMode(in8,OUTPUT);
  
 
  
}
  // put your setup code here, to run once:



void loop() {
  ldrstatus = analogRead(ldr);
  if(ldrstatus > 800){
  digitalWrite(led,HIGH);
  }
  else{
  digitalWrite(led,LOW);
  }
  sharpvalue = analogRead(sharppin);
  distanceS = sharpvalue/2.54;
  digitalWrite(trig,LOW);
  delayMicroseconds(10);
  digitalWrite(trig,HIGH);
  delayMicroseconds(10);
  digitalWrite(trig, LOW);
  timeInmicro = pulseIn(echo,HIGH);
  distanceIncm = timeInmicro /29/2;
  Serial.print("Distance to target is: ");
  Serial.print(distanceIncm);
  Serial.println(" cm ");
  Serial.println(distanceS);
  delay(500);
  lcd.setCursor(2, 1);
  lcd.print("obstacle Distance");
  lcd.println(distanceIncm);
  lcd.clear();
  lcd.setCursor(0,2);
  lcd.print(distanceS);
  lcd.clear();
  movefw();
  if(distanceIncm >= 20 && distanceS >= 15 ){
    movefw();
  }
  else{
    stop();
    delay(1000);
    movebc();
    delay(500);
    stop();
    delay(500);
    moveright();
    delay(500);
  }
  if(Serial.available() > 0){
    data = Serial.read();
    Serial.println(data);
    }
    if(data == 'F'){
        movefw();
    }
    else if(data == 'B'){
        movebc();
    }
    else if(data == 'R'){
        moveright();
    }
    else if(data == 'L'){
        moveleft();
    }
    else if(data == 'S'){
        stop();
    }
  

}

void motor1fw(){
digitalWrite(in1,HIGH);
}
void motor2fw(){
digitalWrite(in3,HIGH);
}
void motor3fw(){
digitalWrite(in5,HIGH);
}
void motor4fw(){
digitalWrite(in7,HIGH);
}
void movefw(){
Serial.println("\nMotor is moving forward");
motor1fw();
motor2fw();
motor3fw();
motor4fw();
}
void motor1bc(){
digitalWrite(in2,HIGH);
}
void motor2bc(){
digitalWrite(in4,HIGH);
}
void motor3bc(){
digitalWrite(in6,HIGH);
}
void motor4bc(){
digitalWrite(in8,HIGH);
}
void movebc(){
Serial.println("\nMotor is moving back");
motor1bc();
motor2bc();
motor3bc();
motor4bc();
}
void moveright(){
Serial.println("\nMotor is moving right");
motor1fw();
motor2fw();
motor3bc();
motor4bc();
}
void moveleft(){
Serial.println("\nMotor is moving left");
motor1bc();
motor2bc();
motor3fw();
motor4fw();
}
void stop(){
  digitalWrite(in1,LOW);
  digitalWrite(in2,LOW);
  digitalWrite(in3,LOW);
  digitalWrite(in4,LOW);
  digitalWrite(in5,LOW);
  digitalWrite(in6,LOW);
  digitalWrite(in7,LOW);
  digitalWrite(in8,LOW);
}

